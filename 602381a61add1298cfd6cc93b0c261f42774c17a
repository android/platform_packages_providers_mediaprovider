{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3bec387d_bdd141b0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1346941
      },
      "writtenOn": "2020-11-11T14:11:11Z",
      "side": 1,
      "message": "Hi Kwan, can you please point Tang to the change we made internally that already optimizes this using std::set? ChangeId: Idec356253bcd1abfa0dc6d47090bcdbee845f8b1:\n\n\nSpeed up lookups\n\nMain idea behind this change is to avoid linear search by storing list\nof child nodes in a set\u003cnode*\u003e. Using std:is_transparent custom\ncomparator we can compare node* to other types (in this case\nstd::pair\u003cstd::string, uintptr_t\u003e), which allows us to speed up\nLookupChildByName function.\n\nNote that this slightly changes the behaviour. Before this change, if\nthere were multiple children nodes with the same case-insensitive name,\nthe one that was added to the parent earliest will be returned (among\nthe non-deleted ones). With this change, the one with lowest inode will\nbe returned (again, among the non-deleted ones). Given that both of the\norderings seem quite random to me, I don\u0027t see a problem here, but I\nmight be wrong. :)\n\nTest: atest fuse_node_test\nTest: atest com.android.providers.media.client.PerformanceTest\nTest: atest CtsScopedStorageHostTest\nBug: 158809855\nChange-Id: Idec356253bcd1abfa0dc6d47090bcdbee845f8b1",
      "revId": "602381a61add1298cfd6cc93b0c261f42774c17a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}